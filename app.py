import streamlit as st
import pandas as pd

# í˜ì´ì§€ ì„¤ì •
st.set_page_config(
    page_title="ì„±í‰ë“± ì˜í™” ëª©ë¡",
    page_icon="ğŸ¬",
    layout="wide"
)

# ì œëª©
st.title("ğŸ¬ ì„±í‰ë“± ì˜í™” ëª©ë¡")
st.markdown("### ì„±í‰ë“±ê³¼ ì—¬ì„±ì˜ ê¶Œë¦¬ë¥¼ ë‹¤ë£¬ ì¶”ì²œ ì˜í™” ëª¨ìŒ")

# ìƒ˜í”Œ ì˜í™” ë°ì´í„°
movies_data = {
    "ì œëª©": [
        "ê·¸ë…€ê°€ ë§í–ˆë‹¤",
        "ìš°ë¨¼ í† í‚¹",
        "ìœ ë§ì£¼",
        "ë” ë¼ìŠ¤íŠ¸ ë“€ì–¼",
        "í”„ë¡œë¯¸ì‹± ì˜ ìš°ë¨¼"
    ],
    "ì—°ë„": [2022, 2022, 2020, 2021, 2020],
    "ê°ë…": [
        "ë§ˆë¦¬ì•„ ìŠˆë¼ë”",
        "ì‚¬ë¼ í´ë¦¬",
        "í‚¤íƒœ í‚¨",
        "ë¦¬ë“¤ë¦¬ ìŠ¤ì½§",
        "ì—ë©”ë„ë“œ í˜ë„¬"
    ],
    "í…Œë§ˆ": [
        "ë¯¸íˆ¬ìš´ë™, ì–¸ë¡ ê³¼ ì •ì˜",
        "ì¢…êµ ê³µë™ì²´ì™€ ì„±í­ë ¥",
        "ìŠ¤í¬ì¸ ê³„ ì„±í­ë ¥",
        "ì¤‘ì„¸ì‹œëŒ€ ì—¬ì„±ì¸ê¶Œ",
        "ë³µìˆ˜ì™€ ì •ì˜"
    ],
    "ì„¤ëª…": [
        "í• ë¦¬ìš°ë“œì˜ ì„±í­ë ¥ ì‚¬ê±´ì„ í­ë¡œí•œ ì—¬ì„± ê¸°ìë“¤ì˜ ìš©ê¸° ìˆëŠ” ì´ì•¼ê¸°",
        "ì¢…êµ ê³µë™ì²´ ë‚´ ì„±í­ë ¥ ë¬¸ì œë¥¼ ê³ ë°œí•˜ê³  ë§ì„œ ì‹¸ìš°ëŠ” ì—¬ì„±ë“¤ì˜ ì´ì•¼ê¸°",
        "ì²´ì¡°ê³„ì˜ ì„±í­ë ¥ ì‚¬ê±´ì„ ë‹¤ë£¬ ì‹¤í™” ê¸°ë°˜ ì˜í™”",
        "14ì„¸ê¸° í”„ë‘ìŠ¤ì—ì„œ ì¼ì–´ë‚œ ì‹¤ì œ ì‚¬ê±´ì„ ë°”íƒ•ìœ¼ë¡œ í•œ ì˜í™”",
        "í˜„ëŒ€ ì‚¬íšŒì˜ ì„±í­ë ¥ ë¬¸ì œë¥¼ ë‹¤ë£¬ ìŠ¤ë¦´ëŸ¬"
    ]
}

# ë°ì´í„°í”„ë ˆì„ ìƒì„±
df = pd.DataFrame(movies_data)

# ì‚¬ì´ë“œë°” - í•„í„°
st.sidebar.header("í•„í„°")

# ì—°ë„ í•„í„°
year_range = st.sidebar.slider(
    "ì—°ë„ ì„ íƒ",
    min_value=int(df["ì—°ë„"].min()),
    max_value=int(df["ì—°ë„"].max()),
    value=(int(df["ì—°ë„"].min()), int(df["ì—°ë„"].max()))
)

# í…Œë§ˆ í•„í„°
themes = st.sidebar.multiselect(
    "í…Œë§ˆ ì„ íƒ",
    options=df["í…Œë§ˆ"].unique(),
    default=[]
)

# ê²€ìƒ‰ ê¸°ëŠ¥
search_term = st.text_input("ì˜í™” ì œëª© ê²€ìƒ‰")

# í•„í„°ë§ ì ìš©
mask = (
    (df["ì—°ë„"].between(year_range[0], year_range[1]))
    & (df["ì œëª©"].str.contains(search_term, case=False))
)

if themes:
    mask = mask & (df["í…Œë§ˆ"].isin(themes))

filtered_df = df[mask]

# ê²°ê³¼ í‘œì‹œ
st.subheader(f"ê²€ìƒ‰ ê²°ê³¼: {len(filtered_df)}ê°œì˜ ì˜í™”")

# ì˜í™” ëª©ë¡ í‘œì‹œ
for _, movie in filtered_df.iterrows():
    with st.expander(f"{movie['ì œëª©']} ({movie['ì—°ë„']})"):
        col1, col2 = st.columns([1, 2])
        with col1:
            st.markdown("**ê°ë…**")
            st.write(movie["ê°ë…"])
            st.markdown("**í…Œë§ˆ**")
            st.write(movie["í…Œë§ˆ"])
        with col2:
            st.markdown("**ì„¤ëª…**")
            st.write(movie["ì„¤ëª…"])

# í‘¸í„°
st.markdown("---")
st.markdown("ì´ ì•±ì€ ì„±í‰ë“± ì˜ì‹ í–¥ìƒì„ ìœ„í•´ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.")
